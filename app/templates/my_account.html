{% extends 'base.html' %}
{% from "_formhelpers.html" import render_field %}

{% block title %} - konto{% endblock %}

{% block head %}
{{ super() }}
<script src="{{ url_for('static', filename='scripts/cars.js') }}"></script>
{% endblock %}

{% block header %}
<h1>Moje konto</h1>
{% endblock %}

{% block content %}
<div class="user">
  <ul>
    <li><b>Nazwa użytkownika:</b> {{ current_user.username }}</li>
    <li><b>Adres email:</b> {{ current_user.email }}</li>
    <li><b>Moje samochody:</b></li>
    <ul class="cars">
      {% for car in current_user.cars %}
      <li>
        <span class="car-description">{{ car.make }} {{ car.model }}, spalanie: {{ car.combustion }}
          l/100km {{ car.fuel }} 
          <form action="{{ url_for('main.delete_car', id=car.id) }}" method="post" style="display: inline;">
          (<button class="show-hide-button" type="submit" name="delete_car">Usuń</button>)
          </form>
        </span>
      </li>
      {% endfor %}
      <li>
        <button class="show-hide-button" id="show-car-up" type="button" onclick="addCar()" style="display: none">Dodaj nowy samochód &#11205;</button>
        <button class="show-hide-button" id="show-car-down" type="button" onclick="addCar()">Dodaj nowy samochód &#11206;</button>
        <form class="carform" style="display: none" method="POST">
          {{ form.csrf_token }}
          {{ render_field(form.make) }}
          {{ render_field(form.model) }}
          {{ render_field(form.combustion) }}
          {{ render_field(form.fuel) }}
          {{ render_field(form.submit) }}
        </form>
      </li>
    </ul>
  </ul>
</div>
{% endblock %}